<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Song+Myung&display=swap" rel="stylesheet">
<title>í¬í† ë¶€ìŠ¤ ìˆ˜ìš” ì˜ˆì¸¡</title>
<style>
* {
  padding: 0;
  margin: 0;
  box-sizing: border-box;
  font-family: "Nanum Gothic", sans-serif;
}
body {
  background-color: black; 
  padding: 40px 0;
}
.container {
  position: relative; /* ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ìš”ì†Œì˜ ìœ„ì¹˜ ì§€ì •ì„ ìœ„í•´ ìƒëŒ€ì ìœ¼ë¡œ ì„¤ì • */
  width: 35%;
  height: 600px;
  margin: 0 auto; 
  background-color: white;
  padding: 20px; 
}
h1 {
  width: 300px;
  margin: 1rem auto; /* ê°€ìš´ë° ì •ë ¬ */
  font-family: "Song Myung", serif;
  text-align: center;
  color: white;
  border: 2px solid black; 
  border-radius: 50%; 
  padding: 10px 20px; 
  background-color: black;
}
#input-container {
  margin-top: 20px; 
}
input[type='text'] {
  padding: 10px;
  width: 79%;
}
input[type='submit'] {
  padding: 10px 20px;
  margin-top: 10px;
  width: 20%;
}
#result-container {
  margin-top: 20px; 
}
.result-text {
  border: 2px solid black; 
  padding: 40px; 
  margin-bottom: 20px; 
  line-height: 2; 
  font-size: 1rem; 
  margin: 0 auto;
}
footer {
  text-align: center;
  margin-top: 20px; 
  color: black;
  font-size: 0.8rem;
  line-height: 1.5;
}
.footer-img {
  width: 100px;
  height: 50px;
  margin: 10px;
}
</style>
</head>
<body>
<div class="container">
<h1>ë„ˆì˜ í¬í† ë¶€ìŠ¤ëŠ”.</h1>
<div id="input-container">
<form id="location-form">
<input type="text" id="location" name="location" placeholder="í¬í† ë¶€ìŠ¤ë¥¼ ì„¤ì¹˜í•  ì¥ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš” :)" required>
<input type="submit" value="ì˜ˆì¸¡">
</form>
</div>

<div id="result-container">
  <p id="search-result" class="result-text">í¬í† ë¶€ìŠ¤ë¥¼ ì„¤ì¹˜í•  ì¥ì†Œ: <span id="search-location"></span><br>ë°˜ê²½ 500m ì´ë‚´ì˜ ì£¼ìš” ìƒê¶Œì„ ë¶„ì„í–ˆì–´ìš”!<br>- ìˆ ì§‘: <span id="bar-count"></span><br>- ë…¸ë˜ë°©: <span id="karaoke-count"></span><br>ğŸ–¤ ì˜ˆìƒ í¬í† ë¶€ìŠ¤ ê°œìˆ˜: <span id="predicted-count"></span><br>ğŸ¤ ì‹¤ì œ í¬í† ë¶€ìŠ¤ ê°œìˆ˜: <span id="actual-count"></span></p>
</div>
<footer>
    ì¤‘ì•™ëŒ€í•™êµ ë°ì´í„°ë¶„ì„ í•™íšŒ í¬í† ë¶€ìŠ¤ ìˆ˜ìš” ì˜ˆì¸¡ í”„ë¡œì íŠ¸<br>
    ğŸ“¸ ê¹€ë‚˜í˜„, ì‹¬ì˜ë³´, ì´ìœ ì •, ì´ì€í•™ ğŸ“¸<br>
    <img src="static/images/logo.jpg" alt="ë‹¤íŠ¸ë¹„ ë¡œê³ " class="footer-img">
</footer>
</div>

<script>
document.getElementById("location-form").addEventListener("submit", function(event) {
    event.preventDefault();
    var location = document.getElementById("location").value;

    // AJAX ìš”ì²­ì„ ì‚¬ìš©í•˜ì—¬ ìœ„ì¹˜ ì •ë³´ë¥¼ ì„œë²„ë¡œ ì „ì†¡
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "/predict", true);
    xhr.setRequestHeader("Content-Type", "application/json");

    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var response = JSON.parse(xhr.responseText);

            // ê²°ê³¼ë¥¼ ë°›ì•„ì™€ì„œ ì²˜ë¦¬
            document.getElementById("search-location").innerText = location;
            document.getElementById("bar-count").innerText = response.bar_count;
            document.getElementById("karaoke-count").innerText = response.karaoke_count;
            document.getElementById("predicted-count").innerText = response.predicted_photobooth_count;
            document.getElementById("actual-count").innerText = response.actual_photobooth_count;
            
            document.getElementById("result-container").style.display = "block";
        }
    };
    var data = JSON.stringify({ "location": location });
    xhr.send(data);
});
</script>

</body>
</html>